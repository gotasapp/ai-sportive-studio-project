# ğŸ”„ Legacy Mint Backup - CÃ³digo Atual

**Data do Backup:** $(date)  
**Motivo:** Backup antes de alteraÃ§Ãµes no mint legacy

## ğŸ“ Arquivos Salvos:

### 1. `src/lib/useWeb3-legacy-backup.ts`
- Backup completo do useWeb3.ts atual
- ImplementaÃ§Ã£o Thirdweb v5 com mintTo()
- Upload IPFS via IPFSService
- sendTransaction() com usuÃ¡rio pagando gas

### 2. FunÃ§Ã£o `handleMintNFT` do JerseyEditor.tsx

```typescript
// ğŸ¯ LEGACY MINT - Direct SDK (fallback) - O FLUXO PRINCIPAL DO USUÃRIO
const handleMintNFT = async () => {
  if (!generatedImageBlob || !selectedTeam || !playerName || !playerNumber) {
    setMintError('Missing required data for minting')
    return
  }

  setIsMinting(true)
  setMintError(null)
  setMintSuccess(null)
  setMintStatus('pending');

  try {
    const nftName = `${selectedTeam} ${playerName} #${playerNumber}`
    const nftDescription = `AI-generated ${selectedTeam} jersey for ${playerName} #${playerNumber}. Style: ${selectedStyle}. Generated by AI Sports NFT Generator.`
    
    const attributes = [
      { trait_type: 'Team', value: selectedTeam },
      { trait_type: 'Player Name', value: playerName },
      { trait_type: 'Player Number', value: playerNumber },
      { trait_type: 'Style', value: selectedStyle },
      { trait_type: 'Quality', value: quality },
      { trait_type: 'Generator', value: 'AI Sports NFT' }
    ]

    console.log('ğŸ¯ LEGACY: Starting NFT mint process...')
    console.log('ğŸ“¦ Name:', nftName)
    console.log('ğŸ“ Description:', nftDescription)
    console.log('ğŸ¨ Attributes:', attributes)

    // Convert blob to File for the mint function
    const imageFile = new File([generatedImageBlob], `${nftName}.png`, { type: 'image/png' });
    
    const result = await mintNFTWithMetadata(
      nftName,
      nftDescription,
      imageFile,
      attributes,
      editionSize
    )

    console.log('âœ… Legacy mint successful:', result)
    setMintStatus('success');
    setMintSuccess(`ğŸ‰ Legacy mint successful! Transaction: ${result.transactionHash}`)
    setTransactionHash(result.transactionHash || 'N/A')
    
  } catch (error: any) {
    console.error('âŒ Legacy mint failed:', error)
    setMintStatus('error');
    
    if (error?.message?.includes('Please deploy a new NFT Collection contract')) {
      setMintError('âŒ Current contract only supports batch URI. Please deploy a new NFT Collection contract with individual tokenURI support.')
    } else {
      setMintError(error instanceof Error ? error.message : 'Minting failed')
    }
    
  } finally {
    setIsMinting(false)
  }
}
```

## ğŸ”§ CaracterÃ­sticas da ImplementaÃ§Ã£o Atual:

### useWeb3.ts (Legacy):
- âœ… **Thirdweb v5 SDK**
- âœ… **createThirdwebClient + getContract**
- âœ… **mintTo() extension**
- âœ… **sendTransaction() - usuÃ¡rio paga gas**
- âœ… **Upload IPFS via IPFSService**
- âœ… **Amoy testnet (80002)**
- âœ… **Retorna: transactionHash, metadataUrl, imageUrl**

### handleMintNFT (JerseyEditor):
- âœ… **ValidaÃ§Ã£o completa de dados**
- âœ… **ConversÃ£o Blob â†’ File**
- âœ… **Logs detalhados**
- âœ… **Status management (pending/success/error)**
- âœ… **Error handling especÃ­fico**
- âœ… **Transaction hash display**

## ğŸ”„ Para Restaurar:

Se precisar voltar ao cÃ³digo atual:

1. **Restaurar useWeb3.ts:**
```bash
cp src/lib/useWeb3-legacy-backup.ts src/lib/useWeb3.ts
```

2. **Restaurar handleMintNFT:**
   - Copiar a funÃ§Ã£o acima de volta para JerseyEditor.tsx

## ğŸ“Š Status do Sistema (Antes das AlteraÃ§Ãµes):

- **ğŸš€ Mint Gasless**: âœ… Funcionando (Engine V3)
- **ğŸ¯ Mint Legacy**: âš ï¸ Implementado mas nÃ£o testado
- **ğŸ”— Wallet Connection**: âœ… Thirdweb v5 apenas
- **ğŸ“± Frontend**: âœ… Dois botÃµes separados
- **ğŸŒ IPFS**: âœ… IPFSService configurado

---

**âš ï¸ IMPORTANTE:** Este backup garante que sempre poderemos voltar ao estado atual se algo der errado nas prÃ³ximas alteraÃ§Ãµes. 